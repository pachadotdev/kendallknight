<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic 'kendallknight' usage • kendallknight</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="file:///usr/share/javascript/jquery/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="file:///usr/share/javascript/bootstrap/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="file:///usr/share/javascript/bootstrap/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic 'kendallknight' usage">
<meta property="og:description" content="kendallknight">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="file:///usr/share/javascript/mathjax/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kendallknight</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/usage.html">Basic 'kendallknight' usage</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pachadotdev/kendallknight/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic ‘kendallknight’ usage</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pachadotdev/kendallknight/blob/HEAD/vignettes/usage.Rmd" class="external-link"><code>vignettes/usage.Rmd</code></a></small>
      <div class="hidden name"><code>usage.Rmd</code></div>

    </div>

    
    
<p><em>For the full details about the implementation, please check
Sepulveda MV (2025) Kendallknight: An R package for efficient
implementation of Kendall’s correlation coefficient computation. PLoS
One 20(6): e0326090. <a href="https://doi.org/10.1371/journal.pone.0326090" class="external-link uri">https://doi.org/10.1371/journal.pone.0326090</a></em></p>
<p>The <code>kendallknight</code> package is exclusively focused on the
Kendall’s correlation coefficient and provides additional functions to
test the statistical significance of the computed correlation not
available in other packages, which is particularly useful in econometric
and statistical contexts.</p>
<p>The <code>kendallknight</code> package is available on CRAN and can
be installed using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"kendallknight"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pachadotdev/kendallknight"</span><span class="op">)</span></span></code></pre></div>
<p>As an illustrative exercise we can explore the question ‘is there a
relationship between the number of computer science doctorates awarded
in the United States and the total revenue generated by arcades?’
Certainly, this question is about a numerical exercise and not about
causal mechanisms.</p>
<p>The following table obtained from <span class="citation">@vigen2015</span> can be used to illustrate the usage
of the <code>kendallknight</code> package:</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="53%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th align="right">Year</th>
<th align="right">Computer science doctorates awarded in the US</th>
<th align="right">Total revenue generated by arcades</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="right">861</td>
<td align="right">1.196</td>
</tr>
<tr class="even">
<td align="right">2001</td>
<td align="right">830</td>
<td align="right">1.176</td>
</tr>
<tr class="odd">
<td align="right">2002</td>
<td align="right">809</td>
<td align="right">1.269</td>
</tr>
<tr class="even">
<td align="right">2003</td>
<td align="right">867</td>
<td align="right">1.240</td>
</tr>
<tr class="odd">
<td align="right">2004</td>
<td align="right">948</td>
<td align="right">1.307</td>
</tr>
<tr class="even">
<td align="right">2005</td>
<td align="right">1129</td>
<td align="right">1.435</td>
</tr>
<tr class="odd">
<td align="right">2006</td>
<td align="right">1453</td>
<td align="right">1.601</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="right">1656</td>
<td align="right">1.654</td>
</tr>
<tr class="odd">
<td align="right">2008</td>
<td align="right">1787</td>
<td align="right">1.803</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="right">1611</td>
<td align="right">1.734</td>
</tr>
</tbody>
</table>
<p>The <code><a href="../reference/kendall_cor.html">kendall_cor()</a></code> function can be used to compute the
Kendall’s correlation coefficient:</p>
<pre><code>library(kendallknight)

kendall_cor(arcade$doctorates, arcade$revenue)

[1] 0.8222222</code></pre>
<p>The <code><a href="../reference/kendall_cor_test.html">kendall_cor_test()</a></code> function can be used to test the
null hypothesis that the Kendall’s correlation coefficient is zero:</p>
<pre><code>kendall_cor_test(
  arcade$doctorates,
  arcade$revenue,
  conf.level = 0.8,
  alternative = "greater"
)

        Kendall's rank correlation tau

data:  arcade$doctorates and arcade$revenue
tau = 0.82222, p-value = 0.0001788
alternative hypothesis: true tau is greater than 0
80 percent confidence interval:
 0.5038182 1.0000000</code></pre>
<p>One important difference with base R implementation is that this
implementation allows to obtain confidence intervals for different
confidence levels (e.g., 95%, 90%, etc).</p>
<p>With the obtained <span class="math inline">\(p\)</span>-value and a
significance level of 80% (the default is 95%), the null hypothesis is
rejected for the two-tailed test (<span class="math inline">\(H_0: \tau
= 0\)</span> versus <span class="math inline">\(H_1: \neq 0\)</span>,
the default option) and the greater than one-tailed test (<span class="math inline">\(H_0: \tau = 0\)</span> versus <span class="math inline">\(H_1: \tau &gt; 0\)</span>) but not for the lower
than one-tailed test (<span class="math inline">\(H_0: \tau = 0\)</span>
versus <span class="math inline">\(H_1: \tau &lt; 0\)</span>). This
suggests the correlation is positive (e.g., more doctorates are
associated with more revenue generated by arcades). In other words,
these three tests tell us that the empirical evidence from this dataset
provides three answers to the research questions:</p>
<ol style="list-style-type: decimal">
<li>Is there any relationship? Yes, more doctorates are associated with
more revenue generated by arcades.</li>
<li>Is there a positive relationship? Yes, more doctorates are
associated with more revenue generated by arcades.</li>
<li>Is there a negative relationship? No, more doctorates are not
associated with less revenue generated by arcades.</li>
</ol>
<p>With base R or <code>Kendall</code>, an equivalent result can be
obtained with the following code:</p>
<pre><code>cor.test(arcade$doctorates, arcade$revenue, method = "kendall")

        Kendall's rank correlation tau

data:  arcade$doctorates and arcade$revenue
T = 41, p-value = 0.0003577
alternative hypothesis: true tau is not equal to 0
sample estimates:
      tau 
0.8222222 </code></pre>
<pre><code>Kendall::Kendall(arcade$doctorates, arcade$revenue)

tau = 0.822, 2-sided pvalue =0.0012822</code></pre>
<p>In an Econometric context, the current implementation is particularly
useful to compute the pseudo-<span class="math inline">\(R^2\)</span>
statistic defined as the squared Kendall correlation in the context of
(Quasi) Poisson regression with fixed effects <span class="citation">[@santos;@sepulveda]</span>. A local test reveals how
the pseudo-<span class="math inline">\(R^2\)</span> computation time
drops from fifty to one percent of the time required to compute the
model coefficients by using the <code>fepois()</code> function from the
<code>lfe</code> package <span class="citation">[@gaure]</span> and a
dataset containing fifteen thousand rows <span class="citation">[@yotov]</span>:</p>
<pre><code>library(tradepolicy)
library(lfe)

data8694 &lt;- subset(agtpa_applications, year %in% seq(1986, 1994, 4))

fit &lt;- fepois(
  trade ~ dist + cntg + lang + clny + rta |
    as.factor(paste0(exporter, year)) +
    as.factor(paste0(importer, year)),
  data = data8694
)

psr &lt;- (cor(data8694$trade, fit$fitted.values, method = "kendall"))^2

psr2 &lt;- (kendall_cor(data8694$trade, fit$fitted.values))^2

c("kendallknight" = psr, "base R" = psr2)

kendallknight        base R 
     0.263012      0.263012 </code></pre>
<p>Comparing the model fitting time versus the correlation computation
time, we can see that the <code>kendallknight</code> package becomes
relevant:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Operation</th>
<th align="right">Time</th>
<th align="right">Pseudo <span class="math inline">\(R^2\)</span> /
Model fitting</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Model fitting</td>
<td align="right">3.75s</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Pseudo-<span class="math inline">\(R^2\)</span> (base
R)</td>
<td align="right">1.78s</td>
<td align="right">47.58%</td>
</tr>
<tr class="odd">
<td align="left">Pseudo-<span class="math inline">\(R^2\)</span>
(kendallknight)</td>
<td align="right">0.02s</td>
<td align="right">0.51%</td>
</tr>
</tbody>
</table>
<p>For simulated datasets with variables “x” and “y” created with
<code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm()</a></code> and <code><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois()</a></code> we observe a increasingly
time differences as the number of observations increases:</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="30%">
<col width="24%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="center">No. of observations</th>
<th align="center">kendallknight median time (s)</th>
<th align="center">Kendall median time (s)</th>
<th align="center">Base R median time (s)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">10,000</td>
<td align="center">0.013</td>
<td align="center">1.0</td>
<td align="center">4</td>
</tr>
<tr class="even">
<td align="center">20,000</td>
<td align="center">0.026</td>
<td align="center">3.9</td>
<td align="center">16</td>
</tr>
<tr class="odd">
<td align="center">30,000</td>
<td align="center">0.040</td>
<td align="center">8.7</td>
<td align="center">36</td>
</tr>
<tr class="even">
<td align="center">40,000</td>
<td align="center">0.056</td>
<td align="center">15.6</td>
<td align="center">64</td>
</tr>
<tr class="odd">
<td align="center">50,000</td>
<td align="center">0.071</td>
<td align="center">24.2</td>
<td align="center">100</td>
</tr>
<tr class="even">
<td align="center">60,000</td>
<td align="center">0.088</td>
<td align="center">34.8</td>
<td align="center">144</td>
</tr>
<tr class="odd">
<td align="center">70,000</td>
<td align="center">0.104</td>
<td align="center">47.5</td>
<td align="center">196</td>
</tr>
<tr class="even">
<td align="center">80,000</td>
<td align="center">0.123</td>
<td align="center">61.9</td>
<td align="center">256</td>
</tr>
<tr class="odd">
<td align="center">90,000</td>
<td align="center">0.137</td>
<td align="center">78.2</td>
<td align="center">324</td>
</tr>
<tr class="even">
<td align="center">100,000</td>
<td align="center">0.153</td>
<td align="center">96.4</td>
<td align="center">399</td>
</tr>
</tbody>
</table>
</div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mauricio Vargas Sepulveda.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
